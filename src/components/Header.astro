---
import { SITE_TITLE } from '../consts';
import HeaderLink from './HeaderLink.astro';
import UserBadge from '../components/auth/UserBadge.astro';
import SearchBar from './SearchBar.astro';
const currentPath = Astro.url.pathname;
---

<header class="site-header">
  <h2><a href="/">{SITE_TITLE}</a></h2>

  

  <ul class="nav internal-links">
    <li><HeaderLink href="/section/features">Features</HeaderLink></li>
    <li><HeaderLink href="/calendar">Calendar</HeaderLink></li>
    <li><HeaderLink href="/section/dining">Dining</HeaderLink></li>
    <li><HeaderLink href="/section/business">Business</HeaderLink></li>
    <li><HeaderLink href="/section/real-estate">Real Estate</HeaderLink></li>
    <li>
		<HeaderLink href="/family">Family</HeaderLink>
      	<ul>
        	<li><a href="/family/boulder-kids-activities">Kids Activities Finder</a></li>
      	</ul>
    </li>
  </ul>
</header>

{currentPath !== '/search' && <SearchBar />}
<UserBadge />

<style>
/* Header title uses your old look */
.site-header {
  margin: 0;
  padding: 0 1em;
  position: relative;
  z-index: 10;
}

.site-header h2 {
  margin: 10px 0;
  font-size: 3em;
  font-family: "IM FELL French Canon Roman";
  text-align: center;
  border-bottom: 1px solid var(--accent);
}

.site-header h2 a,
.site-header h2 a.active {
  text-decoration: none;
  color: inherit;
}

/* Reset */
.nav,
.nav ul {
  list-style: none;
  margin: 0;
  padding: 0;
}

/* Top-level menu â€“ matches your uppercase, size, font, colors */
.nav {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 0.75rem;
  width: 100%;
  text-transform: uppercase;
  font-size: 14px;
  font-family: 'NataSans', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  font-weight: 400;
}

.nav > li {
  position: relative;
}

/* Top-level links */
.nav > li > a {
  display: block;
  padding: 0.75rem 0.5rem;
  color: var(--black);
  text-decoration: none;
  border-bottom: 4px solid transparent;
  transition: border-color 120ms ease;
}

.nav > li > a:hover,
.nav > li > a:focus-visible,
.nav > li > a.active {
  border-bottom-color: var(--accent);
  outline: none;
}

/* Submenu (hidden by default) */
.nav li ul {
  display: none;
  position: absolute;
  top: 100%;
  left: 0;
  min-width: 200px;
  background: #fff;
  border: 1px solid var(--gray-light, #e5e9f0);
  box-shadow: 0 8px 24px rgba(0,0,0,0.08), 0 2px 6px rgba(0,0,0,0.06);
  padding: 0.25rem 0;
  z-index: 1000;
  text-transform: none;   /* subitems not uppercase */
}

/* Show submenu on hover or keyboard focus */
.nav li:hover > ul,
.nav li:focus-within > ul {
  display: block;
}

/* Submenu links inherit your font & color */
.nav li ul li a {
  display: block;
  padding: 0.5rem 0.75rem;
  font-family: 'NataSans', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  font-weight: 400;
  font-size: 13px;
  color: var(--black);
  text-decoration: none;
  white-space: nowrap;
}

.nav li ul li a:hover,
.nav li ul li a:focus-visible {
  background: rgba(0,0,0,0.04);
  outline: none;
}

/* Optional: keep social links hidden on small screens if you re-add them */
@media (max-width: 720px) {
  .social-links { display: none; }
}
</style>